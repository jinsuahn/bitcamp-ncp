<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<title>ex07</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script>
  // bodt 태그의 콘텐트가 모두 로딩된 후 작업
  // window의 load 이벤트가 발생했을때, 작업

  // load 이벤트:
  // HTML을 실행하여 DOM Tree를 완성하고
  // HTML에 연결된 CSS, JavaScript 등의 파일을 모두 다운로드한 후
  // 화면에 콘텐트 출력을 완료할 때 발생한다.

  // body 태그의 콘텐트가 로딩 되기도 전에 dbody를 찾으면 해당 태그는 존재 x

window.onload = () => {

  // load 이벤트가 발생했을 때는 이미 HTML 모든 콘텐트가 로딩된 상태이기 때문에
  // tbody 태그를 찾을 수 있음
  let tbody = $('tbody'); 
  $.getJSON("http://localhost:4000/exam04-3", (result) => {
      result.forEach((b) => {
          $("<tr>")
          .html("<td>" + b.no + "</td>" + 
                  "<td>" + b.title + "</td>" + 
                  "<td>" + b.writer + "</td>" +
                  "<td>" + b.viewCnt + "</td>")
          .appendTo(tbody);
      });
  });
    // 단 이미 콘텐트가 화면에 출력된 상태이기 때문에
    // 태그의 상태를 바꾸면 화면 깜빡거리는 현상이 발생
    // 따라서 load 이벤트에서 화면을 변경시키는 작업을 수행하는 것은 바람직 하지 않음.

};
</script>

</head>

<body>

<h1>load 이벤트 - window.onload</h1>

<table border="1">
  <thead>
      <tr><th>번호</th><th>제목</th><th>작성자</th><th>조회수</th></tr>
  </thead>
  <tbody>
  
  </tbody>

</table>

<hr>
<p>비트캠프02022</p>

</body>
</html>
